<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Home - Sitarello</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', Arial, sans-serif;
            background: linear-gradient(120deg, #667eea 0%, #764ba2 100%);
        }
        
        /* Assicurati che la hero-section sia sopra le bolle */
       
    </style>
</head>
<body>
    <div class="animated-bg">
        <div class="bubble" style="left:10%; animation-delay:0s;"></div>
        <div class="bubble" style="left:30%; animation-delay:2s;"></div>
        <div class="bubble" style="left:55%; animation-delay:4s;"></div>
        <div class="bubble" style="left:75%; animation-delay:1s;"></div>
        <div class="bubble" style="left:85%; animation-delay:3s;"></div>
    </div>
    <header>
        <nav class="navbar glass">
            <div class="nav-brand">
                <a th:href="@{/}">Sitarello</a>
            </div>
            <div class="nav-search">
                <form th:action="@{/products/quick-search}" method="get">
                    <input type="text" name="q" placeholder="Ricerca rapida..." />
                    <button type="submit">🔍</button>
                </form>
            </div>
            <div class="nav-links">
                <!-- Link per utenti autenticati -->
                <div th:if="${isAuthenticated}">
                    <a th:href="@{/products}">🛍️ Tutti i Prodotti</a>
                    <a th:href="@{/users/products}">📦 I Miei Prodotti</a>
                    <a th:href="@{/product/create/images}">➕ Aggiungi Prodotto</a>
                    
                    <!-- Dropdown per utente loggato -->
                    <div class="dropdown">
                        <span class="dropdown-toggle">Ciao, <span th:text="${username}">Utente</span></span>
                        <div class="dropdown-menu">
                            <a th:href="@{/users/profile}">👤 Profilo</a>
                            <form th:action="@{/logout}" method="post" class="nav-logout">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <button type="submit">🚪 Logout</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Link per utenti non autenticati -->
                <div th:unless="${isAuthenticated}">
                    <a th:href="@{/products}">🛍️ Esplora Prodotti</a>
                    <a th:href="@{/users/login}">🔑 Accedi</a>
                    <a th:href="@{/users/register}">📝 Registrati</a>
                </div>
            </div>
        </nav>
    </header>
    
    <div class="hero-section">
        <div class="hero-icon">
            <!-- SVG decorativo, puoi sostituirlo con un’immagine a piacere -->
            <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                <circle cx="40" cy="40" r="38" fill="#fff" fill-opacity="0.13" stroke="#fff" stroke-width="4"/>
                <path d="M25 45L40 30L55 45" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
        <h1 class="hero-title animate-fadein">Benvenuto su Sitarello</h1>
        <p class="hero-subtitle animate-fadein" style="animation-delay:0.2s;">Il marketplace per comprare e vendere prodotti in modo semplice, sicuro e veloce</p>
        <div class="hero-badge animate-fadein" style="animation-delay:0.4s;">
            <span>🛡️ Sicurezza garantita &nbsp;|&nbsp; 🚚 Spedizioni rapide &nbsp;|&nbsp; ⭐ 1000+ utenti soddisfatti</span>
        </div>
        <div class="hero-search animate-fadein" style="animation-delay:0.6s;">
            <form th:action="@{/products/search}" method="get">
                <input type="text" name="searchTerm" placeholder="Cosa stai cercando? (es. libro, smartphone, scarpe...)" />
                <button type="submit">🔍 Cerca</button>
            </form>
        </div>
        <p class="animate-fadein" style="animation-delay:0.8s;">Oppure <a th:href="@{/products}" style="color: #fff; text-decoration: underline; font-weight: 700;">esplora tutti i prodotti</a></p>
    </div>
    
    <!-- Nuova sezione: Come funziona -->
    <section class="how-it-works">
        <h2>Come funziona Sitarello?</h2>
        <div class="steps">
            <div class="step">
                <div class="step-icon">🔎</div>
                <div class="step-title">1. Cerca</div>
                <div class="step-desc">Trova il prodotto che desideri tra migliaia di annunci.</div>
            </div>
            <div class="step">
                <div class="step-icon">💬</div>
                <div class="step-title">2. Contatta</div>
                <div class="step-desc">Scrivi al venditore in modo sicuro e veloce.</div>
            </div>
            <div class="step">
                <div class="step-icon">🤝</div>
                <div class="step-title">3. Concludi</div>
                <div class="step-desc">Acquista o vendi in tutta tranquillità e sicurezza.</div>
            </div>
        </div>
    </section>
    
    <main class="container">
        <!-- Messaggio personalizzato per utenti autenticati -->
        <div th:if="${isAuthenticated}" style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin-bottom: 30px; text-align: center;">
            <h2>👋 Benvenuto, <span th:text="${username}">Utente</span>!</h2>
            <p>Gestisci i tuoi prodotti, esplora il marketplace e inizia a vendere subito.</p>
        </div>
        
        <!-- Azioni Rapide -->
        <div class="quick-actions">
            <!-- Card per tutti gli utenti -->
            <div class="action-card">
                <h3>🛍️ Esplora Prodotti</h3>
                <p>Naviga tra migliaia di prodotti, usa filtri avanzati e trova esattamente quello che cerchi.</p>
                <a th:href="@{/products}" class="btn">Inizia l'Esplorazione</a>
            </div>
            
            <!-- Card per utenti non autenticati -->
            <div th:unless="${isAuthenticated}" class="action-card">
                <h3>🔑 Accedi o Registrati</h3>
                <p>Unisciti alla community per vendere i tuoi prodotti e accedere a funzionalità esclusive.</p>
                <a th:href="@{/users/login}" class="btn">Accedi</a>
                <a th:href="@{/users/register}" class="btn btn-success" style="margin-left: 10px;">Registrati</a>
            </div>
            
            <!-- Card per utenti autenticati -->
            <div th:if="${isAuthenticated}" class="action-card">
                <h3>➕ Vendi un Prodotto</h3>
                <p>Aggiungi un nuovo prodotto al marketplace e raggiungi migliaia di potenziali acquirenti.</p>
                <a th:href="@{/product/create/images}" class="btn btn-success">Aggiungi Prodotto</a>
            </div>
            
            <div th:if="${isAuthenticated}" class="action-card">
                <h3>📦 I Tuoi Prodotti</h3>
                <p>Gestisci i prodotti che hai messo in vendita, modifica dettagli e monitora le visualizzazioni.</p>
                <a th:href="@{/users/products}" class="btn">Gestisci Prodotti</a>
            </div>
        </div>
        
        <!-- Sezione Statistiche/Informazioni -->
        <div class="stats-section">
            <h3>🚀 Perché scegliere Sitarello?</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; margin-top: 20px;">
                <div>
                    <h4>🔍 Ricerca Avanzata</h4>
                    <p>Filtri intelligenti per trovare esattamente quello che cerchi</p>
                </div>
                <div>
                    <h4>🛡️ Sicuro e Affidabile</h4>
                    <p>Sistema di autenticazione e protezione dei dati</p>
                </div>
                <div>
                    <h4>💡 Facile da Usare</h4>
                    <p>Interfaccia intuitiva per compratori e venditori</p>
                </div>
                <div>
                    <h4>🌟 Community Attiva</h4>
                    <p>Unisciti a migliaia di utenti soddisfatti</p>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="footer">
        <p>© 2025 Sitarello. La tua piattaforma di fiducia per il commercio online.</p>
    </footer>
</body>
</html>